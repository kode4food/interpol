<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A Guide to Interpol</title>
  <link href='//fonts.googleapis.com/css?family=Roboto:400,400italic,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/wide.css">

</head>
<body>
  <div class="container">
    <h1>
      <a href="./">A Guide to Interpol</a>
    </h1>
  </div>
  <div class="container">
    <h2 id="importing-stuff">Importing Stuff</h2>

<p>Importing partials and variables in Interpol is similar to Python.  One can either import an entire module as a single variable, or can cherry-pick individual properties.  In all cases, the imported items can be aliased locally.</p>

<h3 id="importing-entire-modules">Importing Entire Modules</h3>

<p>When an entire module is imported, it will be stored as a single local Object variable whose name (unless aliased) is the last component of its module path.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">import</span> <span class="n">dir</span><span class="o">.</span><span class="n">subdir</span><span class="o">.</span><span class="n">module1</span>  <span class="c1"># will import as &#39;module1&#39;</span>

<span class="n">import</span> <span class="n">dir</span><span class="o">.</span><span class="n">subdir</span><span class="o">.</span><span class="n">module1</span><span class="p">,</span> <span class="n">dir</span><span class="o">.</span><span class="n">subdir</span><span class="o">.</span><span class="n">module2</span>

<span class="n">import</span> <span class="n">dir</span><span class="o">.</span><span class="n">subdir</span><span class="o">.</span><span class="n">module1</span> <span class="n">as</span> <span class="n">myModule</span>  <span class="c1"># will import as `myModule`</span>

<span class="n">import</span> <span class="n">dir</span><span class="o">.</span><span class="n">subdir</span><span class="o">.</span><span class="n">module1</span> <span class="n">as</span> <span class="n">mod1</span><span class="p">,</span>
       <span class="n">dir</span><span class="o">.</span><span class="n">subdir</span><span class="o">.</span><span class="n">module2</span> <span class="n">as</span> <span class="n">mod2</span>
</code></pre></div>
<p>When you&#39;ve imported an entire module, you have to address its partials or variables via membership paths:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">import</span> <span class="n">dir</span><span class="o">.</span><span class="n">subdir</span><span class="o">.</span><span class="n">module1</span> <span class="n">as</span> <span class="n">myModule</span>
<span class="n">myModule</span><span class="o">.</span><span class="n">myPartial</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">)</span>
</code></pre></div>
<h3 id="cherry-picking-items">Cherry-Picking Items</h3>

<p>When cherry-picking, only the imported items will be placed in the local scope, the module itself will be discarded.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">from</span> <span class="n">dir</span><span class="o">.</span><span class="n">subdir</span><span class="o">.</span><span class="n">module1</span> <span class="n">import</span> <span class="n">myVariable</span>

<span class="n">from</span> <span class="n">dir</span><span class="o">.</span><span class="n">subdir</span><span class="o">.</span><span class="n">module1</span> <span class="n">import</span> <span class="n">myVariable</span> <span class="n">as</span> <span class="n">myVar</span>

<span class="n">from</span> <span class="n">dir</span><span class="o">.</span><span class="n">subdir</span><span class="o">.</span><span class="n">module1</span> <span class="n">import</span> <span class="n">myVariable</span><span class="p">,</span> <span class="n">myPartial</span> <span class="n">as</span> <span class="n">partial1</span>
<span class="n">partial1</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">)</span>
</code></pre></div>
<h3 id="resolvers">Resolvers</h3>

<p>A resolver is an interface used by Interpol to resolve an imported module.  There are two available for developer use, and one automatically registered for apps bundled by the command-line interface.</p>

<h4 id="memory">Memory</h4>

<p>A memory resolver allows you to register templates as named modules.  These templates can be strings to be compiled, compiled Interpol Module functions, or Objects containing JavaScript functions.  An instance of this resolver is registered by default, and is also used to export Interpol&#39;s system modules.  It can be accessed like so:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">interpol</span><span class="p">.</span><span class="nx">runtime</span><span class="p">().</span><span class="nx">registerModule</span><span class="p">(</span><span class="s1">&#39;myModule&#39;</span><span class="p">,</span>
  <span class="s2">&quot;def hello(name)\n&quot;</span> <span class="o">+</span>
  <span class="s1">&#39;  &quot;Hello, %name!&quot;\n&#39;</span> <span class="o">+</span>
  <span class="s2">&quot;end&quot;</span>
<span class="p">);</span>
</code></pre></div>
<p>You can then resolve the module in your template:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">from</span> <span class="n">myModule</span> <span class="n">import</span> <span class="n">hello</span>
<span class="n">hello</span><span class="p">(</span><span class="s1">&#39;World&#39;</span><span class="p">)</span>
</code></pre></div>
<h4 id="file-(node.js-only)">File (Node.js only)</h4>

<p>A file resolver allows you to monitor a set of directories on disk as a source for your templates.  It&#39;s a little more complicated to use than the memory resolver, and so is not registered by default.  To create one:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">interpol</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;interpol&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;interpol/lib/resolvers&#39;</span><span class="p">);</span>

<span class="nx">resolvers</span><span class="p">.</span><span class="nx">createFileResolver</span><span class="p">(</span><span class="nx">interpol</span><span class="p">.</span><span class="nx">runtime</span><span class="p">(),</span> <span class="p">{</span>
  <span class="nx">path</span><span class="o">:</span> <span class="s2">&quot;./my_templates&quot;</span><span class="p">,</span>
  <span class="nx">compile</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// default: false</span>
  <span class="nx">monitor</span><span class="o">:</span> <span class="kc">true</span>  <span class="c1">// default: false</span>
<span class="p">});</span>
</code></pre></div>
<p>If you wanted to import from a module named &#39;myModule&#39;, Interpol will check for <code>./my_templates/myModule.int.js</code>.  If that file doesn&#39;t exist, and if <code>compile</code> is set to true, then Interpol will check for <code>./my_templates/myModule.int</code>.</p>

<p>The <code>path</code> property of createFileResolver&#39;s options can also take an Array of paths.  The <code>compile</code> flag tells the resolver that it should compile Interpol templates (in-memory only) instead of loading a pre-compiled JavaScript version.  The <code>monitor</code> flag tells the resolver that it should monitor the directories for changes and reload the modules automatically.</p>

<h3 id="modules-and-context">Modules and Context</h3>

<p>Modules in Interpol have their own context, based on a pre-defined global context.  So the context you provide to your Template won&#39;t implicitly be available to them.  This behavior was also intended to avoid surprises, since what you put into a Module is generally meant to be reusable among many Templates.</p>

<h3 id="system-modules">System Modules</h3>

<p>The default memory resolver exposes the standard run-time library of Interpol.  This library consists of several modules that provide a variety of functionality.  These modules include list, string and math functions.</p>

  </div>
<div class="navigate">
  <span class="prev"><a href="07-partials.html">Previous Chapter</a></span>
  <span class="index"><a href="index.html">Table of Contents</a></span>
  <span class="next"><a href="09-realworld.html">Next Chapter</a></span>
</div>


</body>
</html>

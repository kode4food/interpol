<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A Guide to Interpol</title>
  <link href='//fonts.googleapis.com/css?family=Roboto:400,400italic,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/wide.css">

</head>
<body>
  <div class="container">
    <h1>
      <a href="./">A Guide to Interpol</a>
    </h1>
  </div>
  <div class="container">
    <h2 id="looping-over-data">Looping Over Data</h2>

<p>For loops allow one to iterate over sets of items.  For example:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">for</span> <span class="n">person</span> <span class="k">in</span> <span class="n">people</span>
  <span class="n">renderItem</span><span class="p">(</span><span class="n">person</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
<p>In this example, a new scope is created.  The loop then iterates over all elements in <code>people</code>.  For each element, a variable called <code>person</code> is assigned and the statement block that invokes <code>renderItem</code> is executed.</p>

<h3 id="nested-loops">Nested Loops</h3>

<p>You can also nest loops:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">for</span> <span class="n">person</span> <span class="k">in</span> <span class="n">people</span><span class="p">,</span> <span class="n">brother</span> <span class="k">in</span> <span class="n">person</span><span class="o">.</span><span class="n">brothers</span>
  <span class="n">renderItem</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="n">brother</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
<p>In this example, the outer loop iterates over all elements in <code>people</code>, assigning the identifier <code>person</code> to each element.  For each <code>person</code> item, an inner loop is executed that iterates over the person&#39;s <code>brothers</code> property, assigning the identifier <code>brother</code> to each element.  You&#39;ll notice that <code>person</code> is available in the inner loop&#39;s scope and that both identifiers are available in the statement block.</p>

<h3 id="else-clauses">Else Clauses</h3>

<p>You can also define an <code>else</code> clause for those cases where the for loop finds no matches:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">for</span> <span class="n">person</span> <span class="k">in</span> <span class="n">people</span><span class="p">,</span> <span class="n">brother</span> <span class="k">in</span> <span class="n">person</span><span class="o">.</span><span class="n">brothers</span>
  <span class="n">renderItem</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="n">brother</span><span class="p">)</span>
<span class="k">else</span>
  <span class="s2">&quot;I got nothin&#39;!&quot;</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="guards">Guards</h3>

<p>This becomes especially important if you apply guards to your ranges:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">for</span> <span class="n">person</span> <span class="k">in</span> <span class="n">people</span> <span class="k">when</span> <span class="n">person</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">&#39;stooge&#39;</span><span class="p">,</span>
    <span class="n">brother</span> <span class="k">in</span> <span class="n">person</span><span class="o">.</span><span class="n">brothers</span> <span class="k">when</span> <span class="n">brother</span><span class="o">.</span><span class="n">living</span>
  <span class="n">renderItem</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="n">brother</span><span class="p">)</span>
<span class="k">else</span>
  <span class="s2">&quot;I got nothin&#39;!&quot;</span>
<span class="k">end</span>
</code></pre></div>
<h2 id="list-comprehensions">List Comprehensions</h2>

<p>Now take everything you&#39;ve just learned about looping using statements and let&#39;s turn that knowledge to the task of transforming lists.  A List Comprehension allows you to loop over a List, filtering and transforming it into a new List, and it supports nearly all of the functionality of the <code>for</code> statement.</p>

<h3 id="filtering">Filtering</h3>

<p>First, let&#39;s assume you have a list of colors.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">let</span> <span class="n">colors</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> 
              <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;indigo&#39;</span><span class="p">,</span> <span class="s1">&#39;violet&#39;</span><span class="o">]</span>
</code></pre></div>
<p>What if we want only the colors consisting of six letters?  In a normal loop, we&#39;d do something like this:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="n">colors</span> <span class="k">when</span> <span class="n">c</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">6</span>
  <span class="n">c</span>
<span class="k">end</span>
</code></pre></div>
<p>This will display the list, but not create a new one.  We can do that with a List Comprehension as you see here:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">let</span> <span class="n">c6</span> <span class="o">=</span> <span class="o">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="n">colors</span> <span class="k">when</span> <span class="n">c</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">6</span><span class="o">]</span>
<span class="n">c6</span>  <span class="c1">#-&gt; orange yellow ingido violet</span>
</code></pre></div>
<h3 id="transforming">Transforming</h3>

<p>You can also transform the results.  Let&#39;s say you need to modify the color names:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">from</span> <span class="n">string</span> <span class="n">import</span> <span class="n">title</span>
<span class="n">let</span> <span class="n">c6</span> <span class="o">=</span> <span class="o">[</span><span class="n">title</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="n">colors</span> <span class="k">when</span> <span class="n">c</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">6</span><span class="o">]</span>
<span class="n">c6</span>  <span class="c1">#-&gt; Orange Yellow Indigo Violet</span>
</code></pre></div>
<p>Even better, you can create Dictionary based lists from Vectors and vice-versa:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">from</span> <span class="n">string</span> <span class="n">import</span> <span class="n">title</span>
<span class="n">let</span> <span class="n">c6</span> <span class="o">=</span> <span class="o">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;_key&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="n">colors</span> <span class="k">when</span> <span class="n">c</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">6</span><span class="o">]</span>
<span class="c1"># c6 is now [orange_key=&#39;Orange&#39;, yellow_key=&#39;Yellow&#39;, ...</span>
</code></pre></div>
<p>With the exception of <code>else</code> clauses and statement blocks, all aspects of <code>for</code> loops are supported, even nested ranges!</p>

  </div>
<div class="navigate">
  <span class="prev"><a href="05-branching.html">Previous Chapter</a></span>
  <span class="index"><a href="index.html">Table of Contents</a></span>
  <span class="next"><a href="07-partials.html">Next Chapter</a></span>
</div>


</body>
</html>
